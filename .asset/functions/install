




#Install and download dependencies
mpdk_install() {
    #Create dir
    mkdir "$ASSET"/cache "$ASSET"/recipe
    touch "$ASSET"/myplugins "$ASSET"/myplugins
    #Download dependencies
    git clone --quiet --depth 1 https://github.com/moodlehq/moodle-docker.git "$ASSET"/moodle-docker/
    #Customzie Moodle-docker
    cp "$ASSET"/local.yml "$ASSET"/moodle-docker/local.yml
    cp "$ASSET"/dockerfile "$ASSET"/moodle-docker/dockerfile
    #Set the copyright string (for newly created plugin)
    while true; do
        read -p "Copyright string, will be used for newly created plugins (Eg. Jonh Smith <jonhsmith@myorg.com>) : " input
        if [ -n "${input}" ]; then
            printf "\nexport COPYRIGHT_STRING=\"$input\"" >> "$ASSET"/config
            break
        fi    
    done
    #Set the editor
    read -p "What Editor use to edit the code? Insert the full path (or leave blank): " input
    if [ -n "${input}" ]; then
        printf "\nexport MPDK_EDIOTR=\"$input\"" >> "$ASSET"/config
    fi
    #Set mpdk into the global PATH (if the user want)
    while true; do
        read -p "Do you want to add mpdk to your PATH? (y/n) : " yn
        case $yn in
            [Yy]* ) sudo ln -s "$MPDK_ROOT"/mpdk /usr/local/bin/mpdk; break;;
            [Nn]* ) break;;
            * ) printf "\nPlease answer yes or no.";;
        esac
    done
    printf "\nInstallation completed, run 'mpdk -h' for a list of avaible commands\n"
}
